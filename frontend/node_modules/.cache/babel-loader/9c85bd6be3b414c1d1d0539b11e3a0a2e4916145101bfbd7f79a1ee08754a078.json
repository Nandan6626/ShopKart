{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/ShopKart/frontend/src/context/CartContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useReducer, useEffect } from 'react';\n\n// Initial state\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  cart: [],\n  shippingAddress: {},\n  paymentMethod: ''\n};\n\n// Action types\nconst ADD_TO_CART = 'ADD_TO_CART';\nconst REMOVE_FROM_CART = 'REMOVE_FROM_CART';\nconst UPDATE_CART_QUANTITY = 'UPDATE_CART_QUANTITY';\nconst CLEAR_CART = 'CLEAR_CART';\nconst SAVE_SHIPPING_ADDRESS = 'SAVE_SHIPPING_ADDRESS';\nconst SAVE_PAYMENT_METHOD = 'SAVE_PAYMENT_METHOD';\n\n// Reducer\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n      const item = action.payload;\n      const existItem = state.cart.find(x => x._id === item._id);\n      if (existItem) {\n        return {\n          ...state,\n          cart: state.cart.map(x => x._id === existItem._id ? {\n            ...item,\n            quantity: x.quantity + item.quantity\n          } : x)\n        };\n      } else {\n        return {\n          ...state,\n          cart: [...state.cart, item]\n        };\n      }\n    case REMOVE_FROM_CART:\n      return {\n        ...state,\n        cart: state.cart.filter(x => x._id !== action.payload)\n      };\n    case UPDATE_CART_QUANTITY:\n      return {\n        ...state,\n        cart: state.cart.map(x => x._id === action.payload.id ? {\n          ...x,\n          quantity: action.payload.quantity\n        } : x)\n      };\n    case CLEAR_CART:\n      return {\n        ...state,\n        cart: []\n      };\n    case SAVE_SHIPPING_ADDRESS:\n      return {\n        ...state,\n        shippingAddress: action.payload\n      };\n    case SAVE_PAYMENT_METHOD:\n      return {\n        ...state,\n        paymentMethod: action.payload\n      };\n    default:\n      return state;\n  }\n};\n\n// Create context\nexport const CartContext = /*#__PURE__*/createContext();\n\n// Provider component\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(cartReducer, initialState);\n\n  // Add to cart action\n  const addToCart = item => {\n    dispatch({\n      type: ADD_TO_CART,\n      payload: item\n    });\n  };\n\n  // Remove from cart action\n  const removeFromCart = id => {\n    dispatch({\n      type: REMOVE_FROM_CART,\n      payload: id\n    });\n  };\n\n  // Update cart quantity action\n  const updateCartQuantity = (id, quantity) => {\n    if (quantity <= 0) {\n      removeFromCart(id);\n    } else {\n      dispatch({\n        type: UPDATE_CART_QUANTITY,\n        payload: {\n          id,\n          quantity\n        }\n      });\n    }\n  };\n\n  // Clear cart action\n  const clearCart = () => {\n    dispatch({\n      type: CLEAR_CART\n    });\n  };\n\n  // Save shipping address action\n  const saveShippingAddress = address => {\n    dispatch({\n      type: SAVE_SHIPPING_ADDRESS,\n      payload: address\n    });\n  };\n\n  // Save payment method action\n  const savePaymentMethod = method => {\n    dispatch({\n      type: SAVE_PAYMENT_METHOD,\n      payload: method\n    });\n  };\n\n  // Calculate totals\n  const itemsPrice = state.cart.reduce((acc, item) => acc + item.quantity * item.price, 0);\n  const shippingPrice = itemsPrice > 100 ? 0 : 10;\n  const taxPrice = Number((0.15 * itemsPrice).toFixed(2));\n  const totalPrice = Number((itemsPrice + shippingPrice + taxPrice).toFixed(2));\n\n  // Load cart from localStorage on mount\n  useEffect(() => {\n    const cartItems = localStorage.getItem('cartItems');\n    const shippingAddress = localStorage.getItem('shippingAddress');\n    const paymentMethod = localStorage.getItem('paymentMethod');\n    if (cartItems) {\n      dispatch({\n        type: 'LOAD_CART',\n        payload: JSON.parse(cartItems)\n      });\n    }\n    if (shippingAddress) {\n      dispatch({\n        type: SAVE_SHIPPING_ADDRESS,\n        payload: JSON.parse(shippingAddress)\n      });\n    }\n    if (paymentMethod) {\n      dispatch({\n        type: SAVE_PAYMENT_METHOD,\n        payload: paymentMethod\n      });\n    }\n  }, []);\n\n  // Save cart to localStorage whenever cart changes\n  useEffect(() => {\n    localStorage.setItem('cartItems', JSON.stringify(state.cart));\n  }, [state.cart]);\n\n  // Save shipping address to localStorage\n  useEffect(() => {\n    if (Object.keys(state.shippingAddress).length > 0) {\n      localStorage.setItem('shippingAddress', JSON.stringify(state.shippingAddress));\n    }\n  }, [state.shippingAddress]);\n\n  // Save payment method to localStorage\n  useEffect(() => {\n    if (state.paymentMethod) {\n      localStorage.setItem('paymentMethod', state.paymentMethod);\n    }\n  }, [state.paymentMethod]);\n  const value = {\n    cart: state.cart,\n    shippingAddress: state.shippingAddress,\n    paymentMethod: state.paymentMethod,\n    addToCart,\n    removeFromCart,\n    updateCartQuantity,\n    clearCart,\n    saveShippingAddress,\n    savePaymentMethod,\n    itemsPrice,\n    shippingPrice,\n    taxPrice,\n    totalPrice\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"4iRlf1j8yd8EOnLzdn/Ri/p3tw0=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useReducer","useEffect","jsxDEV","_jsxDEV","initialState","cart","shippingAddress","paymentMethod","ADD_TO_CART","REMOVE_FROM_CART","UPDATE_CART_QUANTITY","CLEAR_CART","SAVE_SHIPPING_ADDRESS","SAVE_PAYMENT_METHOD","cartReducer","state","action","type","item","payload","existItem","find","x","_id","map","quantity","filter","id","CartContext","CartProvider","children","_s","dispatch","addToCart","removeFromCart","updateCartQuantity","clearCart","saveShippingAddress","address","savePaymentMethod","method","itemsPrice","reduce","acc","price","shippingPrice","taxPrice","Number","toFixed","totalPrice","cartItems","localStorage","getItem","JSON","parse","setItem","stringify","Object","keys","length","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/ShopKart/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useReducer, useEffect } from 'react';\n\n// Initial state\nconst initialState = {\n  cart: [],\n  shippingAddress: {},\n  paymentMethod: '',\n};\n\n// Action types\nconst ADD_TO_CART = 'ADD_TO_CART';\nconst REMOVE_FROM_CART = 'REMOVE_FROM_CART';\nconst UPDATE_CART_QUANTITY = 'UPDATE_CART_QUANTITY';\nconst CLEAR_CART = 'CLEAR_CART';\nconst SAVE_SHIPPING_ADDRESS = 'SAVE_SHIPPING_ADDRESS';\nconst SAVE_PAYMENT_METHOD = 'SAVE_PAYMENT_METHOD';\n\n// Reducer\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n      const item = action.payload;\n      const existItem = state.cart.find((x) => x._id === item._id);\n\n      if (existItem) {\n        return {\n          ...state,\n          cart: state.cart.map((x) =>\n            x._id === existItem._id\n              ? { ...item, quantity: x.quantity + item.quantity }\n              : x\n          ),\n        };\n      } else {\n        return {\n          ...state,\n          cart: [...state.cart, item],\n        };\n      }\n\n    case REMOVE_FROM_CART:\n      return {\n        ...state,\n        cart: state.cart.filter((x) => x._id !== action.payload),\n      };\n\n    case UPDATE_CART_QUANTITY:\n      return {\n        ...state,\n        cart: state.cart.map((x) =>\n          x._id === action.payload.id\n            ? { ...x, quantity: action.payload.quantity }\n            : x\n        ),\n      };\n\n    case CLEAR_CART:\n      return {\n        ...state,\n        cart: [],\n      };\n\n    case SAVE_SHIPPING_ADDRESS:\n      return {\n        ...state,\n        shippingAddress: action.payload,\n      };\n\n    case SAVE_PAYMENT_METHOD:\n      return {\n        ...state,\n        paymentMethod: action.payload,\n      };\n\n    default:\n      return state;\n  }\n};\n\n// Create context\nexport const CartContext = createContext();\n\n// Provider component\nexport const CartProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(cartReducer, initialState);\n\n  // Add to cart action\n  const addToCart = (item) => {\n    dispatch({ type: ADD_TO_CART, payload: item });\n  };\n\n  // Remove from cart action\n  const removeFromCart = (id) => {\n    dispatch({ type: REMOVE_FROM_CART, payload: id });\n  };\n\n  // Update cart quantity action\n  const updateCartQuantity = (id, quantity) => {\n    if (quantity <= 0) {\n      removeFromCart(id);\n    } else {\n      dispatch({ type: UPDATE_CART_QUANTITY, payload: { id, quantity } });\n    }\n  };\n\n  // Clear cart action\n  const clearCart = () => {\n    dispatch({ type: CLEAR_CART });\n  };\n\n  // Save shipping address action\n  const saveShippingAddress = (address) => {\n    dispatch({ type: SAVE_SHIPPING_ADDRESS, payload: address });\n  };\n\n  // Save payment method action\n  const savePaymentMethod = (method) => {\n    dispatch({ type: SAVE_PAYMENT_METHOD, payload: method });\n  };\n\n  // Calculate totals\n  const itemsPrice = state.cart.reduce(\n    (acc, item) => acc + item.quantity * item.price,\n    0\n  );\n\n  const shippingPrice = itemsPrice > 100 ? 0 : 10;\n  const taxPrice = Number((0.15 * itemsPrice).toFixed(2));\n  const totalPrice = Number((itemsPrice + shippingPrice + taxPrice).toFixed(2));\n\n  // Load cart from localStorage on mount\n  useEffect(() => {\n    const cartItems = localStorage.getItem('cartItems');\n    const shippingAddress = localStorage.getItem('shippingAddress');\n    const paymentMethod = localStorage.getItem('paymentMethod');\n\n    if (cartItems) {\n      dispatch({ type: 'LOAD_CART', payload: JSON.parse(cartItems) });\n    }\n    if (shippingAddress) {\n      dispatch({ type: SAVE_SHIPPING_ADDRESS, payload: JSON.parse(shippingAddress) });\n    }\n    if (paymentMethod) {\n      dispatch({ type: SAVE_PAYMENT_METHOD, payload: paymentMethod });\n    }\n  }, []);\n\n  // Save cart to localStorage whenever cart changes\n  useEffect(() => {\n    localStorage.setItem('cartItems', JSON.stringify(state.cart));\n  }, [state.cart]);\n\n  // Save shipping address to localStorage\n  useEffect(() => {\n    if (Object.keys(state.shippingAddress).length > 0) {\n      localStorage.setItem('shippingAddress', JSON.stringify(state.shippingAddress));\n    }\n  }, [state.shippingAddress]);\n\n  // Save payment method to localStorage\n  useEffect(() => {\n    if (state.paymentMethod) {\n      localStorage.setItem('paymentMethod', state.paymentMethod);\n    }\n  }, [state.paymentMethod]);\n\n  const value = {\n    cart: state.cart,\n    shippingAddress: state.shippingAddress,\n    paymentMethod: state.paymentMethod,\n    addToCart,\n    removeFromCart,\n    updateCartQuantity,\n    clearCart,\n    saveShippingAddress,\n    savePaymentMethod,\n    itemsPrice,\n    shippingPrice,\n    taxPrice,\n    totalPrice,\n  };\n\n  return (\n    <CartContext.Provider value={value}>\n      {children}\n    </CartContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}